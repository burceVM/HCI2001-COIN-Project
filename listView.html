<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard List View</title>
    <link rel="stylesheet" href="listView.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <div id="background-image">
        <div class="task-study-container" id="t1" onclick="startExperiment(1)">
            <h5>Click on the <u>most urgent task</u></h5>
            <span style="font-size: 2.5rem;">Click anywhere to continue</span>
        </div>
        <div class="task-study-container" id="t2" style="display: none;" onclick="startExperiment(2)">
            <h5>Click on the <u>most urgent task in MTH101A</u></h5>
            <span style="font-size: 2.5rem;">Click anywhere to continue</span>
        </div>
        <div class="task-study-container" id="t3" style="display: none;" onclick="startExperiment(3)">
            <h5>Click on the <u>most recent unread announcement</u></h5>
            <span style="font-size: 2.5rem;">Click anywhere to continue</span>
        </div>
        <div class="task-study-container" id="t4" style="display: none;" onclick="startExperiment(4)">
            <h5>Click on the <u>most recent unread announcement in MTH101A</u></h5>
            <span style="font-size: 2.5rem;">Click anywhere to continue</span>
        </div>
        <div class="task-study-container" id="t5" style="display: none;" onclick="startExperiment(5)">
        </div>
        <div id="content">
            
        </div>
    </div>

    <script>
        function toggleDone(taskId) {
            var checkbox = document.getElementById(taskId).querySelector('input[type="checkbox"]');
            var course = document.getElementById(taskId).querySelector('.course');
            var taskTitle = document.getElementById(taskId).querySelector('.task-title');
          
            if (checkbox.checked) {
                course.classList.add('done');
                taskTitle.classList.add('done');
            } else {
                course.classList.remove('done');
                taskTitle.classList.remove('done');
            }
        }

        let task1Counter = 0;
        let task1Timer = 0;
        let task2Counter = 0;
        let task2Timer = 0;
        let task3Counter = 0;
        let task3Timer = 0;
        let task4Counter = 0;
        let task4Timer = 0;
        let timeArray = [];
        let wrongArray = [];

        function startExperiment(tasknumber) {
            $('.task-study-container').css('display', 'none');
            $('#content').append(`
            <div class="section" id="announcements">
                <h4>Announcements</h4>

                <div class="item" id="task1">
                    <input type="checkbox" onclick="toggleDone('task1')">
                    <div class="course-title">
                        <span class="course">CCPROG1 - S12</span><br>
                        <span class="task-title">Week 01 Details</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/07/24</span>
                        <span class="time">10:15 AM</span>
                    </div>
                </div>

                <div class="item" id="task2">
                    <input type="checkbox" onclick="toggleDone('task2')">
                    <div class="course-title">
                        <span class="course">CCPROG1 - S12</span><br>
                        <span class="task-title">Syllabus Posted</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/07/24</span>
                        <span class="time">5:00 PM</span>
                    </div>
                </div>

                <div class="item" id="task3">
                    <input type="checkbox" onclick="toggleDone('task3')">
                    <div class="course-title">
                        <span class="course">CCICOMP - S12</span><br>
                        <span class="task-title">Discord Server for the Course</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/08/24</span>
                        <span class="time">5:00 PM</span>
                    </div>
                </div>

                <div class="item" id="task4">
                    <input type="checkbox" onclick="toggleDone('task4')">
                    <div class="course-title">
                        <span class="course">MTH101A - S12</span><br>
                        <span class="task-title">Introduction to MTH101A</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/06/24</span>
                        <span class="time">7:00 PM</span>
                    </div>
                </div>

                <div class="item" id="task5">
                    <input type="checkbox" onclick="toggleDone('task5')">
                    <div class="course-title">
                        <span class="course">MTH101A - S12</span><br>
                        <span class="task-title">Problem Set 1A</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/08/24</span>
                        <span class="time">9:00 AM</span>
                    </div>
                </div>


            </div>

            <div class="section" id="tasks">
                <h4>Tasks</h4>

                <div class="item" id="task6">
                    <input type="checkbox" onclick="toggleDone('task6')">
                    <div class="course-title">
                        <span class="course">CCPROG1 - S12</span><br>
                        <span class="task-title">Mini Quiz</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/08/24</span>
                        <span class="time">5:00 PM</span>
                    </div>
                </div>

                <div class="item" id="task7">
                    <input type="checkbox" onclick="toggleDone('task7')">
                    <div class="course-title">
                        <span class="course">CCICOMP - S12</span><br>
                        <span class="task-title">Numbers Systems Practice Exercise (Ungraded)</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/07/24</span>
                        <span class="time">9:00 AM</span>
                    </div>
                </div>

                <div class="item" id="task8">
                    <input type="checkbox" onclick="toggleDone('task8')">
                    <div class="course-title">
                        <span class="course">MTH101A - S12</span><br>
                        <span class="task-title">Problem Set 2A</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/19/24</span>
                        <span class="time">11:59 PM</span>
                    </div>
                </div>

            </div>

            <div class="section" id="completed">
                <h4>Completed</h4>

                <div class="item" id="task9">
                    <input type="checkbox" onclick="toggleDone('task9')" checked>
                    <div class="course-title">
                        <span class="course done">MTH101A - S12</span><br>
                        <span class="task-title done">Problem Set 1B</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/11/24</span>
                        <span class="time">11:59 PM</span>
                    </div>
                </div>

                <div class="item" id="task10">
                    <input type="checkbox" onclick="toggleDone('task10')" checked>
                    <div class="course-title">
                        <span class="course done">MTH101A - S12</span><br>
                        <span class="task-title done">Problem Set 1A</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/09/24</span>
                        <span class="time">11:59 PM</span>
                    </div>
                </div>

                <div class="item" id="task11">
                    <input type="checkbox" onclick="toggleDone('task11')" checked>
                    <div class="course-title">
                        <span class="course done">MTH101A - S12</span><br>
                        <span class="task-title done">Find a Partner</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/07/24</span>
                        <span class="time">7:00 PM</span>
                    </div>
                </div>

                <div class="item" id="task12">
                    <input type="checkbox" onclick="toggleDone('task12')" checked>
                    <div class="course-title">
                        <span class="course done">CCICOMP - S12</span><br>
                        <span class="task-title done">Problem Set #1 - Number Systems Conversion</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/11/24</span>
                        <span class="time">11:59 PM</span>
                    </div>
                </div>

                <div class="item" id="task13">
                    <input type="checkbox" onclick="toggleDone('task13')" checked>
                    <div class="course-title">
                        <span class="course done">CCICOMP - S12</span><br>
                        <span class="task-title done">Lab Activity 1 - Assemble Your Own PC</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/08/24</span>
                        <span class="time">6:00 PM</span>
                    </div>
                </div>

                <div class="item" id="task14">
                    <input type="checkbox" onclick="toggleDone('task14')" checked>
                    <div class="course-title">
                        <span class="course done">CCICOMP - S12</span><br>
                        <span class="task-title done">Zoom Link for the Term</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/07/24</span>
                        <span class="time">8:00 PM</span>
                    </div>
                </div>

                <div class="item" id="task15">
                    <input type="checkbox" onclick="toggleDone('task15')" checked>
                    <div class="course-title">
                        <span class="course done">CCICOMP - S12</span><br>
                        <span class="task-title done">Welcome to CCICOMP</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/07/24</span>
                        <span class="time">2:00 PM</span>
                    </div>
                </div>

                <div class="item" id="task16">
                    <input type="checkbox" onclick="toggleDone('task16')" checked>
                    <div class="course-title">
                        <span class="course done">CCPROG1 - S12</span><br>
                        <span class="task-title done">Take Home Assignment</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/10/24</span>
                        <span class="time">11:59 PM</span>
                    </div>
                </div>

                <div class="item" id="task17">
                    <input type="checkbox" onclick="toggleDone('task17')" checked>
                    <div class="course-title">
                        <span class="course done">CCPROG1 - S12</span><br>
                        <span class="task-title done">Basic Program Structure</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/08/24</span>
                        <span class="time">11:59 PM</span>
                    </div>
                </div>

                <div class="item" id="task18">
                    <input type="checkbox" onclick="toggleDone('task18')" checked>
                    <div class="course-title">
                        <span class="course done">CCPROG1 - S12</span><br>
                        <span class="task-title done">Welcome to CCPROG1</span>
                    </div>
                    <div class="date-time">
                        <span class="date">03/06/24</span>
                        <span class="time">10:15 AM</span>
                    </div>
                </div>

            </div>
            `);

            $('.section').each(function() {
                $(this).find('.item').sort(function(a, b) {
                    var dateA = new Date($(a).find('.date').text() + ' ' + $(a).find('.time').text());
                    var dateB = new Date($(b).find('.date').text() + ' ' + $(b).find('.time').text());
                    return dateA - dateB;
                }).appendTo(this);
            });

            $('#announcements').each(function() {
                $(this).find('.item').sort(function(a, b) {
                    var dateA = new Date($(a).find('.date').text() + ' ' + $(a).find('.time').text());
                    var dateB = new Date($(b).find('.date').text() + ' ' + $(b).find('.time').text());
                    return dateB - dateA;
                }).appendTo(this);
            });

            showTask(tasknumber);
        }

        function showTask(tasknumber) {
            var startTime = new Date().getTime();
            var endTime = new Date();
            
            var urgentTask = $('#task7');

            const container = $('#background-image');
            if (tasknumber == 1) {
                urgentTask = $('#task7');
            } else if (tasknumber == 2) {
                urgentTask = $('#task8');
            } else if (tasknumber == 3) {
                urgentTask = $('#task3');
            } else if (tasknumber == 4) {
                urgentTask = $('#task5');
            }
            let clickCntr = 0;

            container.on("click", function(event) {
                if ($(event.target).attr("id") !== urgentTask.attr("id")) {
                    clickCntr++;
                }
            });

            urgentTask.on("click", function() {
                endTime = new Date().getTime();
                var duration = endTime - startTime;
                tasknumber++;
                $('#content').empty();
                if (tasknumber == 2) {
                    task1Counter = clickCntr;
                    task1Timer = duration;
                    $('#t1').css('display', 'none');
                    $('#t2').css('display', '');

                } else if (tasknumber == 3) {
                    task2Counter = clickCntr;
                    task2Timer = duration;
                    $('#t2').css('display', 'none');
                    $('#t3').css('display', '');
                } else if (tasknumber == 4) {
                    task3Counter = clickCntr;
                    task3Timer = duration;
                    $('#t3').css('display', 'none');
                    $('#t4').css('display', '');
                } else {
                    task4Counter = clickCntr;
                    task4Timer = duration;
                    $('#t4').css('display', 'none');
                    $('#t5').css('display', '');
                }

                alert("You found it! You have clicked " + clickCntr + " times");

                clickCntr--;

                timeArray.push(duration);
                wrongArray.push(clickCntr);

                $('.task-study-container').each(function() {
                    $(this).find('br').remove();
                });

                $('.time-taken, .wrong-counter').remove();

                if (tasknumber == 5) {
                    $('.task-study-container').empty();
                    $('.task-study-container').append(`
                        <div>
                            <u>Result of Redesigned List View</u>
                        </div>
                    `);
                    for (let i = 0; i < timeArray.length; i++) {
                        let taskNumber = i + 1;
                        $('.task-study-container').append(`
                            <div>
                                Task ${taskNumber} Duration: ${timeArray[i]} milliseconds
                            </div>
                            <div>
                                Task ${taskNumber} Wrong Clicks: ${wrongArray[i]}
                            </div>
                        `);
                    }
                    $('.task-study-container').css('font-size', '1rem');
                    $('.task-study-container').append(`
                        <br>
                        <div class="proceed" style="font-size: 2.5rem;" onclick="nextView()"><br><u>Click here to proceed to the next test</u></div>
                    `);
                }

            })
        }

        function nextView() {
            window.location.href = 'cardView.html'
        }   
        
    </script>
</body>
</html>